@page "/send_request/"
@inject HttpClient _client
@inject IJSRuntime js
@inject NavigationManager _navManager
@attribute [Authorize]



<h3>Send a Review</h3>
<br />
<br />

<FormComponent ButtonText="Create request" OnValidSubmit="CreateRequest" request="request" />

@code {
	Request? request= new Request();

	private IList<Product>? Products;
	private IList<Review>? Reviews;

	protected async override Task OnInitializedAsync()
	{
		Products = await _client.GetFromJsonAsync<List<Product>>(Endpoints.ProductsEndpoint);
		Reviews = await _client.GetFromJsonAsync<List<Review>>(Endpoints.ReviewsEndpoint);
	}

	private async Task CreateRequest()
	{
		await _client.PostAsJsonAsync(Endpoints.RequestsEndpoint, request);
		_navManager.NavigateTo("/");
	}
}


